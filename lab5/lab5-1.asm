; ===========================================================
; Программа вывода сообщения на экран и ввода строки с клавиатуры
; Без использования внешнего файла in_out.asm
; ===========================================================

SECTION .data    ; Секция инициированных данных
msg: DB 'Введите строку: ', 0 ; сообщение
msg_len: EQU $-msg    ; длина сообщения

SECTION .bss    ; Секция не инициированных данных
buf1: RESB 80    ; Буфер размером 80 байт

SECTION .text    ; Код программы
GLOBAL _start    ; Начало программы

_start:    ; Точка входа в программу
    ; Вывод приглашения для ввода
    mov eax, 4    ; системный вызов write
    mov ebx, 1    ; файловый дескриптор (stdout)
    mov ecx, msg    ; адрес выводимой строки
    mov edx, msg_len    ; длина строки
    int 0x80    ; вызов ядра

    ; Ввод строки с клавиатуры
    mov eax, 3    ; системный вызов read
    mov ebx, 0    ; файловый дескриптор (stdin)
    mov ecx, buf1    ; адрес буфера для ввода
    mov edx, 80    ; максимальная длина ввода
    int 0x80    ; вызов ядра

    ; Вывод введенной строки
    mov eax, 4    ; системный вызов write
    mov ebx, 1    ; файловый дескриптор (stdout)
    mov ecx, buf1    ; адрес введенной строки
    mov edx, 80    ; длина вывода
    int 0x80    ; вызов ядра

    ; Завершение программы
    mov eax, 1    ; системный вызов exit
    mov ebx, 0    ; код возврата 0
    int 0x80    ; вызов ядра
